# Splatoon3のギアパワー取得ログ作成
イカリング3の対戦ログとギア一覧から、ギアパワーの取得ログを作成します。  
# 使い方
## 動作環境
python 3.9.5  
### 必須パッケージ  
pandas 1.4.2  
requests 2.25.1  
pyperclip 1.8.2  

詳細はrequirements.txtを参考ください。  
jupyterで利用できるパッケージも含んでいます。
## 動作の流れ
1. Nindendo Switch Online(NSO)へのログイン準備
1. NSOへのログイン(本プログラム外で手動実行)
1. 各種トークンの取得
1. イカリング3から対戦ログとギア一覧を取得
1. 取得データを加工
1. ギアパワーログをcsvで出力
## 実行方法
1. フォルダ構成を維持したまま、main.pyを実行してください。  
1. 初回または間隔を開けた状態でログインする場合は以下表示が出ます。  
    - token取得用のurlを作成します。
    - urlをクリップボードにコピーしました。webブラウザでアクセスしてください。
    - コピーしたコードを貼り付けてください。
    この指示通り、適当なwebブラウザにアクセスしてログインしてください。  
    ログインをすると、この人にするというボタンが表示されます。  
    右クリックして「リンクのコピー」をし、コンソール上で張り付けをしてください。
    ![sample](./login.png)
1. 後は自動でログを取得しcsvファイルを作成してくれます。

## 各種モジュールの説明
### get_token.py
UserAuthクラスに
- トークン取得
- イカリング3からのデータ取得
に関するメソッドをまとめています。
### processing.py
ProcessingGearDataクラスにイカリング3から取得した生データを獲得したサブギアパワー一覧に加工するためのメソッドをまとめています。
### constant.py
以下をdictとしてまとめています。
- トークン取得リクエストに必要な
  - URL
  - Header
  - parameter
- イカリング3空のデータ取得に必要な
  - parameter
## dataフォルダの中身
一度プログラムを実行すると、以下フォルダが作成されます。
### gear_power_log.csv
ギアパワーのログです。
### raw_gear_power_log.csv
gear_power_log.csvを作成するためのデータです。  
手動でギアパワーログを追加する場合はこのファイルを編集します。  
編集方法は後日記載。
### last_additional_gear_power.csv
前回取得時のギアパワー一覧です。  
このファイルとイカリング3で取得したギアパワー一覧を比較して、ログに追加するかを判断しています。
### setting.ini
イカリング3へのログインに使うトークンの一時保存をします。
また、最新対戦のidも記録しています。
### get_gear.log
このファイルにログを出力します。
